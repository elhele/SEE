\documentclass[a4paper, 12pt]{article}
\usepackage{titling}
\usepackage{array}
\usepackage{booktabs}
\usepackage{enumitem}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage{amssymb}
\usepackage{listings}
\usepackage{color} %red, green, blue, yellow, cyan, magenta, black, white
\setlength{\heavyrulewidth}{1.5pt}
\setlength{\abovetopsep}{4pt}
\setlength{\parindent}{0pt}
\graphicspath{{.}}

\usepackage[margin=1in]{geometry}
\definecolor{mygreen}{RGB}{28,172,0} % color values Red, Green, Blue
\definecolor{mylilas}{RGB}{170,55,241}
% Must be after geometry
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\rhead{SEE Assignment 1}
\lhead{P.Lukin, E. Ovchinnikova}
\cfoot{\thepage}

\setlength{\droptitle}{-5em}

\title{Scientific Experimentation and Evaluation  \\
				Assignment: 2.1}
\author{Petr Lukin, Evgeniya Ovchinnikova}
\date{Lecture date: $17^{th}$ October 2016}

\begin{document}
%-------------------------------------------------------------------------------
\lstset{language=Matlab,%
    %basicstyle=\color{red},
    breaklines=true,%
    morekeywords={matlab2tikz},
    keywordstyle=\color{blue},%
    morekeywords=[2]{1}, keywordstyle=[2]{\color{black}},
    identifierstyle=\color{black},%
    stringstyle=\color{mylilas},
    commentstyle=\color{mygreen},%
    showstringspaces=false,%without this there will be a symbol in the places where there is a space
    numbers=left,%
    numberstyle={\tiny \color{black}},% size of the numbers
    numbersep=9pt, % this defines how far the numbers are from the text
    emph=[1]{break},emphstyle=[1]\color{red}, %some words to emphasise
    %emph=[2]{word1,word2}, emphstyle=[2]{style},
}

%-------------------------------------------------------------------------------


\maketitle

\section{Experiment setup}
In order to verify hypothesis that spread out of the stop positions is governed by Gaussian distribution we need to obtain more data. So, experimental data sets were enlarged o contain 20 more measurements. Additionally, the coordinate system were changed to right handed for convenience. Thus positive angular increment is counter-clockwise. Ultimately, the formula for pose calculation was also updated.

\begin{equation}
\phi = -\arccos(\frac{y_2-y_1}{\sqrt{(y_2-y_1)^2+(x_1-x_2)^2}}),
\end{equation}

if robot goes left. And with next one if the robot goes right. This is because $\arccos$ has range $[0, pi]$.

\begin{equation}
\phi = \pi-\arccos(\frac{y_2-y_1}{\sqrt{(y_2-y_1)^2+(x_1-x_2)^2}}).
\end{equation}

New formula for robot coordinates:

\begin{equation}
X = (\frac{x_1+x_2}{2}-d \cos(\phi),\frac{y_1+y_2}{2}-d \sin(\phi)),
\end{equation}
where $d$ is distance between robot center and point between 2 red dots.


\section{Data preprocessing}
Raw data were divided into 5 experimental sets that can be processed separately. Additionally, a few outliers were removed manually. The criterion was $dist(point,mean)>3 s$, where $s$ is sample variance. Because o elimination of a few datapoints, some points that close to the mean value were added to the each dataset.

\medskip

Matlab code of data preprocessing.

\lstinputlisting{Data_processing.m}

\newpage

\section{PCA}
To fit Gaussian distribution in data we need to verify the hypothesis that spread out of the stop positions is governed by Gaussian distribution. This can be done by Pearson chi square test. But this test is much more easier in one dimensional case than in 2-D. That is why we fit robot position into 2 one dimensional Gaussians. If we want to obtain one dimensional gaussian distribution, we need to project datapoints to principal coordinates of a gaussian. This can be done with principal component analysis. 

\medskip

The following figures shows data distribution in principal coordinate system and principal vectors in world coordinate system for all 5 experiments.


\subsubsection{Straight movement}

\begin{center}
  \includegraphics[scale=0.8]{s1}
\end{center}



\subsubsection{Slight left movement}

\begin{center}
  \includegraphics[scale=0.8]{l1}
\end{center}


\subsubsection{Slight right movement}

\begin{center}
  \includegraphics[scale=0.8]{r1}
\end{center}


\subsubsection{Left movement}

\begin{center}
  \includegraphics[scale=0.8]{ll1}
\end{center}


\subsubsection{Right movement}

\begin{center}
  \includegraphics[scale=0.8]{rr1}
\end{center}

\newpage

Matlab code of PCA function:

\lstinputlisting{fitGaussian.m}

\newpage
\section{Chi square test}
After projecting the data on principal coordinate vectors, chi square test can be performed. In my implementation, confidence level can be chosen. Test checks if data fits Gaussian distribution with $\mu = \mu_{empirical}$ and $\sigma = \sigma_{empirical}$.

The following figures shows histograms of data projections on principal vectors and angular deviation from mean value. Additionally it shows results of a Pearson chi-square test. 

\subsubsection{Straight movement}

\begin{center}
  \includegraphics[scale=0.6]{s2}
  \includegraphics[scale=0.6]{s3}
\end{center}

Data: projection of 1st principal component during  Straight movement, is Gaussian distributed with: mean = 0 and standard deviation sigma = 8.9302 with confidence 0.9%.


\smallskip

Data:  projection of 2st principal component during  Straight movement, can not be proven to have Gaussian Distribution with confidence 0.9%.


\smallskip


Data: angular error during   Straight movement, is Gaussian distributed with: mean = 0 and standard deviation sigma = 0.82481 with confidence 0.9%.



\newpage
\subsubsection{Slight left movement}

\begin{center}
  \includegraphics[scale=0.6]{l2}
  \includegraphics[scale=0.6]{l3}
\end{center}


Data: projection of 1st principal component during  Slight Left movement, is Gaussian distributed with: mean = 0 and standard deviation sigma = 12.7958 with confidence 0.9%.



\smallskip

Data: projection of 2st principal component during  Slight Left movement, is Gaussian distributed with: mean = 0 and standard deviation sigma = 1.7139 with confidence 0.9%.



\smallskip


Data:  angular error during   Slight Left movement, can not be proven to have Gaussian Distribution with confidence 0.9%.
\newpage
\subsubsection{Slight right movement}

\begin{center}

  \includegraphics[scale=0.6]{r2}
  \includegraphics[scale=0.6]{r3}
\end{center}


Data: projection of 1st principal component during  Slight Right movement, is Gaussian distributed with: mean = 0 and standard deviation sigma = 8.8624 with confidence 0.9%.




\smallskip

Data: projection of 2st principal component during  Slight Right movement, is Gaussian distributed with: mean = 0 and standard deviation sigma = 1.2828 with confidence 0.9%.




\smallskip


Data: angular error during   Slight Right movement, is Gaussian distributed with: mean = 0 and standard deviation sigma = 1.7816 with confidence 0.9%.

\newpage
\subsubsection{Left movement}

\begin{center}
  \includegraphics[scale=0.6]{ll2}
  \includegraphics[scale=0.6]{ll3}
\end{center}


Data: projection of 1st principal component during  Left movement, is Gaussian distributed with: mean = 0 and standard deviation sigma = 6.382 with confidence 0.9%.





\smallskip

Data: projection of 2st principal component during  Left movement, is Gaussian distributed with: mean = 0 and standard deviation sigma = 1.0773 with confidence 0.9%.





\smallskip


Data: angular error during   Left movement, is Gaussian distributed with: mean = 0 and standard deviation sigma = 1.2094 with confidence 0.9%.

\newpage
\subsubsection{Right movement}

\begin{center}
  \includegraphics[scale=0.6]{rr2}
  \includegraphics[scale=0.6]{rr3}
\end{center}


Data: projection of 1st principal component during  Right movement, is Gaussian distributed with: mean = 0 and standard deviation sigma = 6.0358 with confidence 0.9%.






\smallskip

Data: projection of 2st principal component during  Right movement, is Gaussian distributed with: mean = 0 and standard deviation sigma = 1.0768 with confidence 0.9%.






\smallskip


Data:  angular error during   Right movement, can not be proven to have Gaussian Distribution with confidence 0.9%.

\newpage

\subsubsection{Matlab code of chi square test function:}

\lstinputlisting{chiSquareTestGaussian.m}

\section{Results/ conclusion}




\end{document}
